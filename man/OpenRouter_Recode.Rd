% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/recode.R
\name{OpenRouter_Recode}
\alias{OpenRouter_Recode}
\title{Recode Cell Values Using OpenRouter}
\usage{
OpenRouter_Recode(
  prompt,
  cell,
  sysprompt =
    "You are a helpful assistant that recodes dataframe values. Return only the transformed value.",
  model = "openrouter/auto/gpt-4",
  temperature = 0.8,
  max_tokens = 1000,
  max_retries = 3,
  retry_delay = 1,
  validate = TRUE,
  referer = getOption("openrouter.referer", "https://github.com/MyWebIntelligence"),
  title = getOption("openrouter.title", "mwiR"),
  api_base = "https://openrouter.ai/api/v1/chat/completions",
  timeout = 60,
  extra_headers = NULL,
  return_metadata = FALSE
)
}
\arguments{
\item{prompt}{Instruction describing how the `cell` content should be
transformed.}

\item{cell}{Single character string (or coercible value) to recode.}

\item{sysprompt}{Optional system message guiding the model. Defaults to a
minimal “return only the transformed value” directive.}

\item{model}{OpenRouter model identifier. Default: `"openrouter/auto/gpt-4"`.}

\item{temperature}{Sampling temperature (0–2).}

\item{max_tokens}{Upper bound on tokens generated by the LLM.}

\item{max_retries}{Maximum number of attempts when the API call fails.}

\item{retry_delay}{Seconds to wait before retrying; automatically increased
after HTTP 429.}

\item{validate}{If `TRUE`, applies simple heuristics (length, refusal lexicon)
to guard against malformed responses.}

\item{referer}{Value for the mandatory `HTTP-Referer` header (OpenRouter
requirement). Defaults to the `openrouter.referer` option or a GitHub URL.}

\item{title}{Value for the `X-Title` header (used for analytics).}

\item{api_base}{Base URL of the OpenRouter chat completions endpoint.}

\item{timeout}{Request timeout in seconds (default 60).}

\item{extra_headers}{Named character vector of additional HTTP headers.}

\item{return_metadata}{Logical; if `TRUE`, returns a list with the transformed
text and a metadata list; otherwise returns only the transformed value.}
}
\value{
Either a character string (default) or a list containing
  `value`, `status`, and `http` metadata when `return_metadata = TRUE`.
}
\description{
Leverage an OpenRouter-hosted LLM to transform a single cell value. The
function mirrors `GPT_Recode` but targets the vendor-neutral OpenRouter REST
endpoint, adding strict validation, retry logic (including handling rate
limits), optional response sanity checks, and rich metadata for auditing.
}
\note{
Requires `OPENROUTER_API_KEY`, plus the packages `httr` and `jsonlite`.
Respect OpenRouter’s rate limits and usage policies.
}
